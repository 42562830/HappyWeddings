<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Calculadora de Tarifas 2026 | Happy Weddings</title>
<meta content="Configura tu presupuesto de boda. Selecciona tu pack y a√±ade extras para obtener una estimaci√≥n al instante." name="description"/>

<!-- Open Graph / WhatsApp -->
<meta content="website" property="og:type"/>
<meta content="Calculadora de Tarifas 2026 | Happy Weddings" property="og:title"/>
<meta content="Configura tu pack de foto y v√≠deo a medida." property="og:description"/>
<meta content="https://42562830.github.io/HappyWeddings/images/boda-02/boda-02-16.jpg" property="og:image"/>

<!-- Fuentes Premium -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&amp;family=Lato:wght@300;400;700&amp;display=swap" rel="stylesheet"/>

<!-- Iconos FontAwesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>

<style>
    /* =========================================
       1. VARIABLES Y BASE
       ========================================= */
    :root {
        --bg-crema: #f8eff1;      
        --bg-azul: #d6e8ef;       
        --texto-principal: #2b2323; 
        --texto-secundario: #7d7572; 
        --blanco: #ffffff;
        --acento: #e6bdc3;        
        --acento-dark: #d49fa6;
        --verde-ok: #4a6fa5; /* Color para indicar incluido */
        
        --container-width: 1200px;
        --radius-soft: 12px;
        --shadow-card: 0 10px 30px rgba(0,0,0,0.05);
        --shadow-hover: 0 20px 40px rgba(0,0,0,0.12);
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; font-size: 16px; }
    
    body {
        background-color: var(--blanco);
        color: var(--texto-principal);
        font-family: 'Lato', sans-serif;
        font-weight: 300;
        line-height: 1.7;
        overflow-x: hidden;
        padding-bottom: 100px; /* Espacio para la barra flotante */
    }

    h1, h2, h3, h4, .price-amount {
        font-family: 'Cormorant Garamond', serif;
        font-weight: 400;
        line-height: 1.15;
    }

    .container {
        max-width: var(--container-width);
        margin: 0 auto;
        padding: 0 20px;
        width: 100%;
    }

    /* Header */
    header {
        position: fixed; top: 0; left: 0; width: 100%; padding: 15px 0;
        z-index: 1000; background: rgba(255, 255, 255, 0.98);
        box-shadow: 0 2px 15px rgba(0,0,0,0.03);
    }
    .nav-container { display: flex; justify-content: space-between; align-items: center; }
    .logo img { height: 60px; width: auto; }
    .nav-back a {
        text-decoration: none; color: var(--texto-principal);
        text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px;
        font-weight: 700;
        display: flex; align-items: center; gap: 8px;
    }

    /* =========================================
       2. HERO SECTION
       ========================================= */
    .pricing-hero {
        position: relative;
        padding: 220px 0 100px;
        text-align: center;
        color: var(--blanco);
        background-image: url('images/boda-02/boda-02-16.jpg');
        background-size: cover;
        background-position: center 30%;
        background-attachment: fixed;
    }
    .pricing-hero::before {
        content: ''; position: absolute; inset: 0;
        background: rgba(0,0,0,0.45); z-index: 1;
    }
    .hero-content { position: relative; z-index: 2; }
    .pricing-hero h1 { font-size: clamp(3rem, 6vw, 5.5rem); margin-bottom: 20px; font-style: italic; text-shadow: 0 4px 15px rgba(0,0,0,0.3); }
    .pricing-hero p { font-size: 1.2rem; max-width: 700px; margin: 0 auto; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }

    /* =========================================
       3. PACKS (SELECCIONABLES)
       ========================================= */
    .pricing-section { padding: 80px 0; background: var(--bg-crema); }
    
    .instruction-text {
        text-align: center; margin-bottom: 40px; color: var(--texto-secundario);
        font-size: 0.9rem; letter-spacing: 1px; text-transform: uppercase;
    }

    .pricing-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 30px;
        align-items: flex-start;
    }

    /* Card Design */
    .pricing-card {
        background: var(--blanco);
        border-radius: var(--radius-soft);
        overflow: hidden;
        box-shadow: var(--shadow-card);
        transition: all 0.3s ease;
        position: relative;
        cursor: pointer;
        border: 2px solid transparent;
        display: flex; flex-direction: column;
        height: 100%;
    }

    .card-image-header { height: 240px; overflow: hidden; position: relative; }
    .card-image-header img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease; }
    
    .pricing-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-hover); }
    .pricing-card:hover .card-image-header img { transform: scale(1.05); }

    /* ESTADO SELECCIONADO (JS) */
    .pricing-card.selected {
        border-color: var(--texto-principal);
        transform: scale(1.02);
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
    }
    .pricing-card.selected::after {
        content: "\f00c"; /* FontAwesome check */
        font-family: "Font Awesome 6 Free"; font-weight: 900;
        position: absolute; top: 15px; right: 15px;
        background: var(--texto-principal); color: white;
        width: 40px; height: 40px; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-size: 1.2rem; z-index: 10;
        animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .card-body { padding: 40px 30px; text-align: center; flex: 1; display: flex; flex-direction: column; }
    
    .pack-name { font-size: 1.6rem; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px; }
    .price { margin: 15px 0 25px; color: var(--texto-principal); }
    .price-amount { font-size: 3.5rem; line-height: 1; display: block; }
    .price-currency { font-size: 1.5rem; vertical-align: super; }

    .features-list { list-style: none; margin: 0 0 30px; text-align: left; padding: 0 10px; flex: 1; }
    .features-list li { margin-bottom: 14px; padding-left: 25px; position: relative; color: var(--texto-secundario); font-size: 0.95rem; }
    .features-list li::before { content: "‚úì"; color: var(--acento); position: absolute; left: 0; font-weight: bold; }
    .features-list li.plus { color: var(--texto-principal); font-weight: 600; }
    
    .pack-desc { font-size: 0.9rem; font-style: italic; color: var(--texto-secundario); margin-top: auto; border-top: 1px solid #f0f0f0; padding-top: 20px; }

    .select-btn {
        margin-top: 25px;
        padding: 12px 0; width: 100%;
        border: 1px solid var(--texto-principal);
        text-transform: uppercase; letter-spacing: 2px;
        background: transparent; transition: all 0.3s;
        font-size: 0.8rem; cursor: pointer; border-radius: 50px;
    }
    .pricing-card:hover .select-btn { background: var(--texto-principal); color: white; }
    .pricing-card.selected .select-btn { background: var(--texto-principal); color: white; content: "Seleccionado"; }

    .featured .badge {
        position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
        background: var(--acento); color: var(--texto-principal);
        padding: 5px 15px; text-transform: uppercase; font-size: 0.7rem;
        letter-spacing: 1px; font-weight: 700; border-radius: 20px;
        z-index: 5; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    /* =========================================
       4. EXTRAS (CON LOGICA DE INCLUIDOS)
       ========================================= */
    .extras-section { padding: 80px 0; background-color: var(--blanco); }
    .section-title { text-align: center; margin-bottom: 60px; }
    .section-title h2 { font-size: 3rem; margin-bottom: 10px; }

    .category-title { 
        font-family: 'Lato', sans-serif; font-weight: 700; text-transform: uppercase; 
        letter-spacing: 2px; margin-bottom: 30px; text-align: center; color: var(--texto-principal);
        position: relative; display: inline-block; left: 50%; transform: translateX(-50%);
    }
    .category-title::after { content:''; display: block; width: 40px; height: 1px; background: var(--acento); margin: 10px auto 0; }

    .extras-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; margin-bottom: 60px; }

    .extra-item {
        background: var(--bg-crema);
        padding: 25px 20px;
        border-radius: var(--radius-soft);
        text-align: center;
        transition: all 0.2s;
        cursor: pointer;
        border: 1px solid transparent;
        position: relative;
    }
    
    /* Hover */
    .extra-item:hover { transform: translateY(-3px); border-color: var(--acento); }
    
    /* Estado SELECCIONADO (Manual) */
    .extra-item.selected {
        background: #fff0f3;
        border-color: var(--texto-principal);
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }
    .extra-item.selected .checkbox-circle { background: var(--texto-principal); border-color: var(--texto-principal); }
    .extra-item.selected .checkbox-circle::after {
        content: "\f00c"; font-family: "Font Awesome 6 Free"; font-weight: 900; color: white; font-size: 0.8rem;
    }

    /* Estado INCLUIDO (Autom√°tico por Pack) */
    .extra-item.included {
        background: rgba(214, 232, 239, 0.4); /* Azul muy suave */
        border-color: var(--verde-ok);
        cursor: default;
        pointer-events: none; /* No se puede clicar */
    }
    .extra-item.included .extra-price {
        color: var(--texto-principal);
        font-size: 0.9rem;
        letter-spacing: 2px;
        text-transform: uppercase;
    }
    .extra-item.included .checkbox-circle {
        background: var(--verde-ok);
        border-color: var(--verde-ok);
    }
    .extra-item.included .checkbox-circle::after {
        content: "\f00c"; /* Check */
        font-family: "Font Awesome 6 Free"; font-weight: 900; color: white; font-size: 0.8rem;
    }
    .extra-item.included .extra-icon { color: var(--verde-ok); }

    /* Checkbox visual */
    .checkbox-circle {
        width: 24px; height: 24px;
        border: 1px solid #ccc; border-radius: 50%;
        margin: 0 auto 15px;
        display: flex; align-items: center; justify-content: center;
        transition: all 0.2s;
    }

    .extra-icon { font-size: 1.8rem; color: var(--acento); margin-bottom: 10px; transition: transform 0.3s; }
    .extra-name { font-family: 'Cormorant Garamond', serif; font-size: 1.3rem; margin-bottom: 5px; font-weight: 600; line-height: 1.2; }
    .extra-price { font-weight: 700; color: var(--texto-principal); font-size: 1rem; display: block; margin-bottom: 8px; }
    .extra-desc { font-size: 0.85rem; color: var(--texto-secundario); line-height: 1.4; }

    /* =========================================
       5. BARRA FLOTANTE
       ========================================= */
    .budget-bar {
        position: fixed; bottom: 0; left: 0; width: 100%;
        background: rgba(255, 255, 255, 0.98);
        border-top: 1px solid rgba(0,0,0,0.1);
        padding: 15px 0;
        box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
        z-index: 2000;
        transform: translateY(100%);
        transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    }
    .budget-bar.visible { transform: translateY(0); }

    .budget-container {
        display: flex; justify-content: space-between; align-items: center;
        max-width: var(--container-width); margin: 0 auto; padding: 0 20px;
    }
    
    .budget-info h4 { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: var(--texto-secundario); margin-bottom: 0; }
    .budget-total { font-size: 1.8rem; font-family: 'Cormorant Garamond', serif; color: var(--texto-principal); line-height: 1; }
    .budget-detail { font-size: 0.75rem; color: var(--acento-dark); }

    .budget-cta {
        background: var(--texto-principal);
        color: white;
        text-decoration: none;
        padding: 12px 30px;
        border-radius: 50px;
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 1px;
        display: flex; align-items: center; gap: 10px;
        transition: all 0.3s;
    }
    .budget-cta:hover { background: var(--acento-dark); transform: translateY(-2px); }

    @keyframes popIn { 0% { transform: scale(0); } 80% { transform: scale(1.2); } 100% { transform: scale(1); } }
    .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
    .reveal.active { opacity: 1; transform: translateY(0); }

    @media (max-width: 768px) {
        .pricing-hero { padding: 140px 0 60px; }
        .pricing-hero h1 { font-size: 3.5rem; }
        .budget-container { flex-direction: column; gap: 10px; text-align: center; }
        .budget-cta { width: 100%; justify-content: center; }
        .pricing-grid { gap: 40px; }
    }
</style>
</head>
<body>

<!-- Header -->
<header id="navbar">
    <div class="container nav-container">
        <div class="logo">
            <a href="index.html"><img alt="Happy Weddings Spain" src="Logo.png"/></a>
        </div>
        <div class="nav-back">
            <a href="index.html"><i class="fas fa-arrow-left"></i> Volver</a>
        </div>
    </div>
</header>

<!-- Hero -->
<section class="pricing-hero">
    <div class="hero-content container">
        <p class="reveal">TARIFAS 2026</p>
        <h1 class="reveal">Calcula tu Pack</h1>
        <p class="reveal">Selecciona un pack y a√±ade los extras que necesites. El presupuesto se actualizar√° autom√°ticamente abajo.</p>
    </div>
</section>

<!-- Packs Grid -->
<section class="pricing-section">
    <div class="container">
        <p class="instruction-text reveal">1. Elige tu Pack Base</p>
        <div class="pricing-grid">
            
            <!-- PACK BRONZE -->
            <div class="pricing-card reveal" onclick="selectPack('bronze', 1499, 'Pack Happy Bronze', this)">
                <div class="card-image-header">
                    <img src="images/boda-03/boda-03-05.jpg" alt="Detalle anillos" loading="lazy">
                </div>
                <div class="card-body">
                    <h3 class="pack-name">Pack Happy Bronze</h3>
                    <div class="price"><span class="price-amount">1.499<span class="price-currency">‚Ç¨</span></span></div>
                    <ul class="features-list">
                        <li class="plus"><strong>D√≠a completo de Foto + V√≠deo</strong></li>
                        <li>Pen Drive Personalizado</li>
                    </ul>
                    <div class="pack-desc">"Para los que buscan lo esencial sin renunciar a lo especial. Directo al coraz√≥n."</div>
                    <button class="select-btn">Seleccionar</button>
                </div>
            </div>

            <!-- PACK SILVER -->
            <div class="pricing-card featured reveal" onclick="selectPack('silver', 2199, 'Pack Happy Silver', this)">
                <div class="badge">Recomendado</div>
                <div class="card-image-header">
                    <img src="images/boda-02/boda-02-17.jpg" alt="Pareja elegante" loading="lazy">
                </div>
                <div class="card-body">
                    <h3 class="pack-name">Pack Happy Silver</h3>
                    <div class="price"><span class="price-amount">2.199<span class="price-currency">‚Ç¨</span></span></div>
                    <ul class="features-list">
                        <li class="plus"><strong>Todo lo anterior +</strong></li>
                        <li class="plus" style="color: var(--texto-principal);"><strong>√Ålbum Profesional 35√ó25</strong></li>
                        <li>Caja de lujo + 2 Mini √Ålbumes</li>
                    </ul>
                    <div class="pack-desc">"Territorio emoci√≥n total. Las visitas en casa siempre acaban con este √°lbum."</div>
                    <button class="select-btn">Seleccionar</button>
                </div>
            </div>

            <!-- PACK GOLD -->
            <div class="pricing-card reveal" onclick="selectPack('gold', 2899, 'Pack Happy Gold', this)">
                <div class="card-image-header">
                    <img src="images/boda-04/boda-04-13.jpg" alt="Fiesta con humo" loading="lazy">
                </div>
                <div class="card-body">
                    <h3 class="pack-name">Pack Happy Gold</h3>
                    <div class="price"><span class="price-amount">2.899<span class="price-currency">‚Ç¨</span></span></div>
                    <ul class="features-list">
                        <li class="plus"><strong>Todo lo anterior +</strong></li>
                        <li class="plus"><strong>V√≠deo con Drone</strong></li>
                        <li>Happy Print + Postboda + Photocall</li>
                    </ul>
                    <div class="pack-desc">"Para tener recuerdos para aburrir... y para presumir."</div>
                    <button class="select-btn">Seleccionar</button>
                </div>
            </div>

        </div>
    </div>
</section>

<!-- Separador -->
<section class="reveal" style="height: 300px; background: url('images/boda-04/boda-04-36.jpg') center/cover fixed; position: relative;">
    <div style="position: absolute; inset: 0; background: rgba(0,0,0,0.2);"></div>
</section>

<!-- Extras Grid -->
<section class="extras-section">
    <div class="container">
        <div class="section-title reveal">
            <span>¬øAlgo m√°s?</span>
            <h2>A√±ade Extras</h2>
            <p class="instruction-text" style="margin-top: 20px;">2. Haz clic para a√±adir o quitar extras</p>
        </div>

        <!-- Momentos -->
        <div class="extras-category reveal">
            <h4 class="category-title">Momentos Inolvidables</h4>
            <div class="extras-grid">
                
                <div class="extra-item" id="extra-preboda" data-price="300" onclick="toggleExtra(300, 'Preboda', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-camera-retro"></i></div>
                    <h3 class="extra-name">Preboda</h3>
                    <span class="extra-price">300‚Ç¨</span>
                    <p class="extra-desc">Foto + V√≠deo. Ensayo general sin presi√≥n y con risas.</p>
                </div>

                <div class="extra-item" id="extra-postboda" data-price="300" onclick="toggleExtra(300, 'Postboda', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-images"></i></div>
                    <h3 class="extra-name">Postboda</h3>
                    <span class="extra-price">300‚Ç¨</span>
                    <p class="extra-desc">Cuando ya no hay nervios y el vestido se puede manchar.</p>
                </div>

                <div class="extra-item" id="extra-happyprint" data-price="200" onclick="toggleExtra(200, 'Happy Print', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-print"></i></div>
                    <h3 class="extra-name">Happy Print</h3>
                    <span class="extra-price">200‚Ç¨</span>
                    <p class="extra-desc">Impresi√≥n en directo para invitados.</p>
                </div>

                <div class="extra-item" id="extra-minialbumes" data-price="250" onclick="toggleExtra(250, 'Mini √Ålbumes', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-book-open"></i></div>
                    <h3 class="extra-name">Mini √Ålbumes</h3>
                    <span class="extra-price">250‚Ç¨</span>
                    <p class="extra-desc">2 unidades para padres. Un regalazo.</p>
                </div>
            </div>
        </div>

        <!-- Emoci√≥n -->
        <div class="extras-category reveal">
            <h4 class="category-title">Emoci√≥n & Cine</h4>
            <div class="extras-grid">
                
                <div class="extra-item" id="extra-dron" data-price="230" onclick="toggleExtra(230, 'V√≠deo Dron', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-plane-departure"></i></div>
                    <h3 class="extra-name">V√≠deo Dron</h3>
                    <span class="extra-price">230‚Ç¨</span>
                    <p class="extra-desc">Vuestro coctel y ceremonia desde las alturas.</p>
                </div>

                <div class="extra-item" id="extra-sameday" data-price="250" onclick="toggleExtra(250, 'Same Day Edit', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-film"></i></div>
                    <h3 class="extra-name">Same Day Edit</h3>
                    <span class="extra-price">250‚Ç¨</span>
                    <p class="extra-desc">Edici√≥n el mismo d√≠a para proyectar en el banquete.</p>
                </div>

                <div class="extra-item" id="extra-slideshow" data-price="200" onclick="toggleExtra(200, 'Slideshow', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-photo-video"></i></div>
                    <h3 class="extra-name">Slideshow</h3>
                    <span class="extra-price">200‚Ç¨</span>
                    <p class="extra-desc">Proyecci√≥n de momentazos para llorar bonito.</p>
                </div>

                <div class="extra-item" id="btn-priority" onclick="togglePriority(this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-shipping-fast"></i></div>
                    <h3 class="extra-name">Entrega Prioritaria</h3>
                    <span class="extra-price">+35% Total</span>
                    <p class="extra-desc">Prioridad para entrega en 15 d√≠as h√°biles.</p>
                </div>
            </div>
        </div>

        <!-- Fiesta -->
        <div class="extras-category reveal">
            <h4 class="category-title">Fiesta & Diversi√≥n</h4>
            <div class="extras-grid">
                
                <div class="extra-item" id="extra-video360" data-price="399" onclick="toggleExtra(399, 'V√≠deo 360', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-video"></i></div>
                    <h3 class="extra-name">V√≠deo 360¬∫ (2H)</h3>
                    <span class="extra-price">399‚Ç¨</span>
                    <p class="extra-desc">Revivirlo como si estuvierais dentro.</p>
                </div>

                <div class="extra-item" id="extra-photomaton" data-price="320" onclick="toggleExtra(320, 'Photomat√≥n', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-id-card-alt"></i></div>
                    <h3 class="extra-name">Photomat√≥n (2H)</h3>
                    <span class="extra-price">320‚Ç¨</span>
                    <p class="extra-desc">Fotos divertidas para la nevera.</p>
                </div>

                <div class="extra-item" id="extra-photocall" data-price="200" onclick="toggleExtra(200, 'Photocall', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-glasses"></i></div>
                    <h3 class="extra-name">Photocall</h3>
                    <span class="extra-price">200‚Ç¨</span>
                    <p class="extra-desc">Pelucas, gafas y hacer el tonto.</p>
                </div>

                <div class="extra-item" id="extra-confesionario" data-price="200" onclick="toggleExtra(200, 'Confesionario', this)">
                    <div class="checkbox-circle"></div>
                    <div class="extra-icon"><i class="fas fa-microphone-alt"></i></div>
                    <h3 class="extra-name">Confesionario</h3>
                    <span class="extra-price">200‚Ç¨</span>
                    <p class="extra-desc">Donde los invitados se sueltan.</p>
                </div>

            </div>
        </div>

    </div>
</section>

<!-- BARRA FLOTANTE -->
<div class="budget-bar" id="budgetBar">
    <div class="budget-container">
        <div class="budget-info">
            <h4 id="packLabel">Selecciona un Pack</h4>
            <div id="priceDisplay" class="budget-total">0‚Ç¨</div>
            <div id="extrasLabel" class="budget-detail">Sin extras seleccionados</div>
        </div>
        <a href="#" onclick="openWhatsapp()" class="budget-cta">
            <i class="fab fa-whatsapp"></i> Consultar Disponibilidad
        </a>
    </div>
</div>

<script>
    // --- ESTADO DE LA CALCULADORA ---
    let state = {
        packId: null, // 'bronze', 'silver', 'gold'
        packPrice: 0,
        packName: "",
        selectedExtras: [], // Manualmente seleccionados {name, price}
        hasPriority: false
    };

    // Definici√≥n de qu√© incluye cada pack (IDs de los divs HTML)
    const packsInclusions = {
        'bronze': [],
        'silver': ['extra-minialbumes'], 
        'gold': ['extra-minialbumes', 'extra-postboda', 'extra-happyprint', 'extra-dron', 'extra-photocall']
    };

    const budgetBar = document.getElementById('budgetBar');
    const priceDisplay = document.getElementById('priceDisplay');
    const packLabel = document.getElementById('packLabel');
    const extrasLabel = document.getElementById('extrasLabel');

    function selectPack(id, price, name, element) {
        // 1. Activar visualmente la tarjeta
        document.querySelectorAll('.pricing-card').forEach(card => {
            card.classList.remove('selected');
            card.querySelector('.select-btn').textContent = "Seleccionar";
        });
        element.classList.add('selected');
        element.querySelector('.select-btn').textContent = "Seleccionado";
        
        // 2. Actualizar estado
        state.packId = id;
        state.packPrice = price;
        state.packName = name;
        
        // 3. Gestionar Extras Incluidos
        updateIncludedExtras();

        // 4. Actualizar barra
        updateCalculator();
        budgetBar.classList.add('visible');
    }

    function updateIncludedExtras() {
        const includedIds = packsInclusions[state.packId] || [];
        
        // Resetear todos los extras primero (limpiar estado "included")
        document.querySelectorAll('.extra-item').forEach(item => {
            // Si es un item normal (tiene data-price)
            if(item.dataset.price) {
                // Si estaba marcado como incluido, restaurarlo
                if(item.classList.contains('included')) {
                    item.classList.remove('included');
                    item.querySelector('.extra-price').textContent = item.dataset.price + "‚Ç¨";
                }
            }
        });

        // Aplicar estado "Included" a los que toquen
        includedIds.forEach(id => {
            const item = document.getElementById(id);
            if(item) {
                // Si estaba seleccionado manualmente, deseleccionarlo
                if(item.classList.contains('selected')) {
                    item.classList.remove('selected');
                    // Remover de state.selectedExtras
                    const name = item.querySelector('.extra-name').innerText;
                    state.selectedExtras = state.selectedExtras.filter(e => e.name !== name);
                }
                
                // Marcar visualmente como incluido
                item.classList.add('included');
                item.querySelector('.extra-price').textContent = "INCLUIDO EN PACK";
            }
        });
    }

    function toggleExtra(price, name, element) {
        // Si est√° marcado como INCLUIDO, no hacer nada al clickar
        if(element.classList.contains('included')) return;

        element.classList.toggle('selected');
        const isSelected = element.classList.contains('selected');

        if (isSelected) {
            state.selectedExtras.push({ name, price });
        } else {
            state.selectedExtras = state.selectedExtras.filter(e => e.name !== name);
        }
        updateCalculator();
    }

    function togglePriority(element) {
        element.classList.toggle('selected');
        state.hasPriority = element.classList.contains('selected');
        updateCalculator();
    }

    function updateCalculator() {
        // Suma Pack + Extras Manuales
        let subtotal = state.packPrice;
        state.selectedExtras.forEach(e => subtotal += e.price);

        // Calcula 35% si aplica
        let priorityCost = 0;
        if (state.hasPriority) {
            priorityCost = Math.round(subtotal * 0.35);
        }

        let total = subtotal + priorityCost;

        // Renderizado textos
        if (state.packName) {
            packLabel.textContent = state.packName;
            
            let extrasText = [];
            // Listar extras manuales
            if (state.selectedExtras.length > 0) extrasText.push(`${state.selectedExtras.length} extras extra`);
            
            // Mencionar impl√≠citamente que hay cosas incluidas
            const includedCount = (packsInclusions[state.packId] || []).length;
            if (includedCount > 0) extrasText.push("Incluye extras del pack");

            if (state.hasPriority) extrasText.push("Prioridad (+35%)");
            
            extrasLabel.textContent = extrasText.length > 0 ? extrasText.join(' + ') : "Pack base seleccionado";
        } else {
            packLabel.textContent = "Selecciona un Pack base";
        }

        animateValue(priceDisplay, parseInt(priceDisplay.innerText.replace('.','').replace('‚Ç¨','')) || 0, total, 300);
    }

    function openWhatsapp() {
        if (!state.packName) {
            alert("Por favor, selecciona primero un Pack Base (Bronze, Silver o Gold).");
            return;
        }

        let text = `Hola Happy Weddings! üëã Me gustar√≠a consultar disponibilidad para mi boda.\n\n`;
        text += `üíç *Mi selecci√≥n:*\n`;
        text += `‚ñ™Ô∏è ${state.packName}: ${state.packPrice}‚Ç¨\n`;
        
        // Listar incluidos para confirmar que el cliente lo sabe
        const includedIds = packsInclusions[state.packId] || [];
        if(includedIds.length > 0){
             text += `   _(Incluye: ${includedIds.map(id => document.getElementById(id).querySelector('.extra-name').innerText).join(', ')})_\n`;
        }

        // Extras adicionales
        if(state.selectedExtras.length > 0){
            text += `\n‚ûï *Extras a√±adidos:*\n`;
            state.selectedExtras.forEach(e => {
                text += `‚ñ™Ô∏è ${e.name}: ${e.price}‚Ç¨\n`;
            });
        }

        if (state.hasPriority) {
            text += `\nüöÄ Entrega Prioritaria (+35%)\n`;
        }

        text += `\nüí∞ *Presupuesto Estimado: ${priceDisplay.innerText}*\n\n`;
        text += `¬øTen√©is fecha libre? Gracias!`;

        const url = `https://api.whatsapp.com/send/?phone=34614297072&text=${encodeURIComponent(text)}`;
        window.open(url, '_blank');
    }

    function animateValue(obj, start, end, duration) {
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            const value = Math.floor(progress * (end - start) + start);
            obj.innerHTML = value.toLocaleString('es-ES') + '<span style="font-size:1rem; vertical-align:top">‚Ç¨</span>';
            if (progress < 1) {
                window.requestAnimationFrame(step);
            }
        };
        window.requestAnimationFrame(step);
    }

    // Reveal animation
    window.addEventListener('scroll', () => {
        const reveals = document.querySelectorAll('.reveal');
        const windowHeight = window.innerHeight;
        reveals.forEach((reveal) => {
            const elementTop = reveal.getBoundingClientRect().top;
            if (elementTop < windowHeight - 100) reveal.classList.add('active');
        });
    });
    window.dispatchEvent(new Event('scroll'));
</script>

</body>
</html>